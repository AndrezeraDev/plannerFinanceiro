<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planner Financeiro</title>
    <link rel="stylesheet" href="/style/main.css">

    <!--fonte-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">


</head>
<body>
    <div class="main-container">
        <header>
            <button class="menu-btn" onclick="toggleMenu()">☰</button>
            <div class="logo">
                <img src="/assets/Design sem nome (1).png" alt="financeiro logo">
            </div>
        </header>

        <!-- Menu lateral -->
        <nav id="sidebar" class="sidebar">
            <ul>
                <li><a href="#">Início</a></li>
                <li><a href="#">Movimentações</a></li>
                <li><a href="#">Despesas</a></li>
                <li><a href="#">Investimentos</a></li>
                <li><a href="#">Relatórios</a></li>
                <li><a href="#">Metas</a></li>
                <li><a href="#">Configurações</a></li>
                <li><a href="#">sair</a></li>
            </ul>
        </nav>
        <div class="notification-card" style="display: none;">
            <p class="notification-message">Seja bem-vindo ao seu planner financeiro!</p>
            <button class="close-btn" onclick="closeNotification()">&times;</button>
        </div>
        

        <main class="content">
            <div class="saudacao-div">
                <h1 class="saudacao">Olá, <span id="nomeUser"></span>!</h1><br>
                <p>Seja bem-vindo ao seu planner financeiro.</p>
            </div>

            <div class="container">
                <div class="card">
                    <h2>Receita</h2>
                    <p class="valor">R$ 0,00</p>
                </div>
                <div class="card">
                    <h2>Despesa</h2>
                    <p class="valor">R$ 0,00</p>
                </div>
                <div class="card">
                    <h2>Saldo</h2>
                    <p class="valor">R$ 0,00</p>
                </div>
            </div>


            <div class="add-movimentacoes">
                <div class="content-mov">
                    <h2>Adicione uma movimentação</h2>
                    <div class="add-mov">
                        <input type="radio" name="movimentacao" id="entrada" value="entrada">
                        <label for="entrada">Entrada</label>
                    
                        <input type="radio" name="movimentacao" id="saida" value="saida">
                        <label for="saida">Saída</label>
                    
                        <input type="text" placeholder="Descrição" id="descricao">
                        <input type="number" placeholder="Valor" id="valor">
                    
                        <!-- Select -->
                        <div class="select">
                            <select name="categoria" id="categoria">
                                <option value="categoria">Categoria</option>
                                <option value="salario">Salário</option>
                                <option value="aluguel">Aluguel</option>
                                <option value="investimento">Investimento</option>
                                <option value="emprestimo">Empréstimo</option>
                            </select>
                        </div>
                        
                        <button class="add-btn">Adicionar</button>
                    </div>
                    </div>
                </div>
            </div>



            <h3 class="movimentacoes-title">Movimentações Recentes</h3>
            <div class="movimentacoes">
                <table class="movimentacoes-table">
                    <thead>
                        <tr>
                            <th>Categoria</th>
                            <th>Descrição</th>
                            <th>Valor</th>
                            <th>Ação</th>
                        </tr>
                    </thead>
                    <tbody id="movimentacoes-list">
                        <!-- As movimentações serão inseridas aqui dinamicamente -->
                    </tbody>
                </table>
            </div>

            <!--gráficos-->

        </main>
    </div>

    <script src="/public/app.js"></script>
    <script>

        function showNotification(message) {
            const notificationCard = document.querySelector('.notification-card');
            const notificationMessage = document.querySelector('.notification-message'); // Seleciona o elemento da mensagem
            notificationMessage.textContent = message; // Define a mensagem personalizada

            notificationCard.style.display = 'flex'; // Exibe o card
            setTimeout(() => notificationCard.classList.add('show'), 10); // Deixa o card deslizar para a esquerda com o delay

            setTimeout(closeNotification, 10000); // Fecha a notificação após 10 segundos
        }

        function closeNotification() {
            const notificationCard = document.querySelector('.notification-card');
            notificationCard.classList.remove('show'); // Remove a animação de slide para a direita

            setTimeout(() => {
                notificationCard.style.display = 'none'; // Oculta o card após o slide de fechamento
            }, 500); // Aguarda o tempo da animação antes de esconder o card
        }

        // Mostrar a notificação com uma mensagem personalizada
        showNotification('Seja bem-vindo ao seu planner financeiro!');




        

        function saveName() {
            const nomeUser = prompt('Para iniciarmos digite seu nome:');
            document.getElementById('nomeUser').innerText = nomeUser;

            localStorage.setItem('nomeUser', nomeUser);
        }

        setTimeout(saveName, 1000);


        function addMovimentacao() {
            console.log('Adicionando movimentação...');
            const entrada = document.getElementById('entrada').checked;
            const saida = document.getElementById('saida').checked;
            const descricao = document.getElementById('descricao').value;
            const valor = document.getElementById('valor').value;
            const categoria = document.getElementById('categoria').value;


            if (!entrada && !saida) {
                alert('Selecione se é uma entrada ou saída!');
                return;
            }

            if (!descricao || !valor || categoria === 'categoria') {
                alert('Preencha todos os campos!');
                return;
            }

            if (entrada.checked && saida.checked) {
                alert('Selecione apenas uma opção!');
                return;
            }

            if (entrada.checked) {
                
            }

            const movimentacao = {
                entrada,
                saida,
                descricao,
                valor,
                categoria
            };

            const movimentacoes = JSON.parse(localStorage.getItem('movimentacoes')) || [];
            movimentacoes.push(movimentacao);
            localStorage.setItem('movimentacoes', JSON.stringify(movimentacoes));

            console.log(`Movimentação adicionada: ${JSON.stringify(movimentacao)}`);

            const movimentacoesList = document.getElementById('movimentacoes-list');
            const newRow = movimentacoesList.insertRow();


            if (movimentacao.entrada == true) {
                newRow.innerHTML = `
                <td>${movimentacao.categoria}</td>
                <td>${movimentacao.descricao}</td>
                <td>${movimentacao.valor}</td>
                <td><img src="/assets/entrada.png" alt="Deletar" style="width: 30px; height: 30px;"></td>
            `;

            }else {
                newRow.innerHTML = `
                <td>${movimentacao.categoria}</td>
                <td>${movimentacao.descricao}</td>
                <td>${movimentacao.valor}</td>
                <td><img src="/assets/saida.png" alt="Deletar" style="width: 30px; height: 30px;"></td>
            `;
            }

            const deleteButton = newRow.querySelector('button');
            deleteButton.addEventListener('click', () => {
                movimentacoes.splice(movimentacoes.indexOf(movimentacao), 1);
                localStorage.setItem('movimentacoes', JSON.stringify(movimentacoes));
                movimentacoesList.deleteRow(newRow.rowIndex);
            });

            document.getElementById('descricao').value = '';
            document.getElementById('valor').value = '';
            document.getElementById('categoria').value = 'categoria';

            showNotification('Movimentação adicionada com sucesso!');

            


        }

        document.querySelector('.add-btn').addEventListener('click', addMovimentacao);


        
    </script>
</body>

</html>

